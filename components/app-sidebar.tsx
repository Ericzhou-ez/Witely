"use client\";\n\nimport { LayoutDashboard, Shield, Waypoints } from \"lucide-react\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/navigation\";\nimport type { User } from \"next-auth\";\nimport { PlusIcon } from \"@/components/icons\";\nimport { SidebarHistory } from \"@/components/sidebar-history\";\nimport { SidebarUserNav } from \"@/components/sidebar-user-nav\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarMenu,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  useSidebar,\n} from \"@/components/ui/sidebar\";\nimport { Kbd, KbdGroup } from \"./ui/kbd\";\nimport { Tooltip, TooltipContent, TooltipTrigger } from \"./ui/tooltip\";\n\n/**\n * AppSidebar component that renders the main navigation sidebar for the Witely application.\n * Includes branding, new chat button, navigation links to key sections, chat history, and user navigation.\n *\n * @param {Object} props\n * @param {User | undefined} props.user - The authenticated user from NextAuth.js\n * @returns {JSX.Element} The sidebar JSX element\n */\nexport function AppSidebar({ user }: { user: User | undefined }) {\n  const router = useRouter();\n  const { setOpenMobile } = useSidebar();\n\n  const closeSidebar = () => setOpenMobile(false);\n\n  return (\n    <Sidebar className=\"group-data-[side=left]:border-r-0\">\n      <SidebarHeader>\n        <SidebarMenu>\n          <div className=\"flex flex-row items-center justify-between\">\n            <Link\n              className=\"flex flex-row items-center gap-3\"\n              href=\"/\"\n              onClick={closeSidebar}\n              data-testid=\"sidebar-home-link\"\n            >\n              <span className=\"cursor-pointer rounded-md px-2 font-semibold text-lg hover:bg-muted\">\n                Witely\n              </span>\n            </Link>\n            <Tooltip>\n              <TooltipTrigger asChild>\n                <Button\n                  className=\"h-8 p-1 md:h-fit md:p-2\"\n                  onClick={() => {\n                    closeSidebar();\n                    router.push(\"/chat\");\n                    router.refresh();\n                  }}\n                  type=\"button\"\n                  variant=\"ghost\"\n                  data-testid=\"new-chat-button\"\n                >\n                  <PlusIcon />\n                </Button>\n              </TooltipTrigger>\n              <TooltipContent align=\"end\" className=\"hidden md:block\">\n                New Chat{\" \"}\n                <KbdGroup>\n                  <Kbd>âŒ˜o</Kbd>\n                </KbdGroup>\n              </TooltipContent>\n            </Tooltip>\n          </div>\n        </SidebarMenu>\n      </SidebarHeader>\n      <SidebarContent>\n        <div className=\"sticky top-0 z-10 bg-sidebar pb-2\">\n          <SidebarGroup>\n            <SidebarGroupLabel>Navigation</SidebarGroupLabel>\n            <SidebarGroupContent>\n              <SidebarMenu>\n                <SidebarMenuItem>\n                  <SidebarMenuButton asChild size={\"sm\"}>\n                    <Link\n                      href=\"/dashboard\"\n                      onClick={closeSidebar}\n                      data-testid=\"sidebar-dashboard-link\"\n                    >\n                      <LayoutDashboard className=\"h-4 w-4\" />\n                      <span>Dashboard</span>\n                    </Link>\n                  </SidebarMenuButton>\n                </SidebarMenuItem>\n\n                <SidebarMenuItem>\n                  <SidebarMenuButton asChild size={\"sm\"}>\n                    <Link\n                      href=\"/integrations\"\n                      onClick={closeSidebar}\n                      data-testid=\"sidebar-integrations-link\"\n                    >\n                      <Waypoints className=\"h-4 w-4\" />\n                      <span>Integrations</span>\n                    </Link>\n                  </SidebarMenuButton>\n                </SidebarMenuItem>\n                <SidebarMenuItem>\n                  <SidebarMenuButton asChild size={\"sm\"}>\n                    <Link\n                      href=\"/data-control\"\n                      onClick={closeSidebar}\n                      data-testid=\"sidebar-data-control-link\"\n                    >\n                      <Shield className=\"h-4 w-4\" />\n                      <span>Data Control</span>\n                    </Link>\n                  </SidebarMenuButton>\n                </SidebarMenuItem>\n              </SidebarMenu>\n            </SidebarGroupContent>\n          </SidebarGroup>\n        </div>\n\n        <SidebarHistory user={user} />\n      </SidebarContent>\n      <SidebarFooter>{user && <SidebarUserNav user={user} />}</SidebarFooter>\n    </Sidebar>\n  );\n}\n